(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["yt-ui"]=e():t["yt-ui"]=e()})("undefined"!==typeof self?self:this,(function(){return function(){"use strict";var t={};!function(){t.d=function(e,a){for(var o in a)t.o(a,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:a[o]})}}(),function(){t.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){t.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){t.p=""}();var e={};if(t.r(e),t.d(e,{default:function(){return E}}),"undefined"!==typeof window){var a=window.document.currentScript,o=a&&a.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);o&&(t.p=o[1])}var n=function(){var t=this,e=t._self._c;return e("div",[t._v(" "+t._s(t.pageName)+" ")])},r=[],l={name:"ytComp",components:{},props:{pageName:{type:String,default:"ytComp"}},computed:{},watch:{},filters:{},data(){return{}},methods:{},created(){},mounted(){},destroyed(){}},i=l;function s(t,e,a,o,n,r,l,i){var s,d="function"===typeof t?t.options:t;if(e&&(d.render=e,d.staticRenderFns=a,d._compiled=!0),o&&(d.functional=!0),r&&(d._scopeId="data-v-"+r),l?(s=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(l)},d._ssrRegister=s):n&&(s=i?function(){n.call(this,(d.functional?this.parent:this).$root.$options.shadowRoot)}:n),s)if(d.functional){d._injectStyles=s;var c=d.render;d.render=function(t,e){return s.call(e),c(t,e)}}else{var f=d.beforeCreate;d.beforeCreate=f?[].concat(f,s):[s]}return{exports:t,options:d}}var d=s(i,n,r,!1,null,"4db69105",null),c=d.exports;c.install=t=>{t.component(c.name,c)};var f=c,m=function(){var t=this;t._self._c;return t._m(0)},p=[function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"a"},[t._v(" a "),e("div",{staticClass:"b"},[t._v("b")])])])}],u={name:"ytDemo",components:{},props:{},computed:{},watch:{},filters:{},data(){return{}},methods:{},created(){},mounted(){},destroyed(){}},h=u,g=s(h,m,p,!1,null,"75d99d1c",null),b=g.exports;b.install=t=>{t.component(b.name,b)};var v=b,x=function(){var t=this,e=t._self._c;return e("div",{staticClass:"textBox"},[e("el-row",{attrs:{gutter:24}},[e("el-col",{attrs:{span:14}},[e("div",{staticClass:"textBox-left"},[e("el-form",{ref:"formData",attrs:{model:t.formData,rules:t.formDataRules,"label-width":"106px"}},[e("el-form-item",{attrs:{label:"文本内容 :",prop:"programContent"}},[e("el-input",{attrs:{size:"small",resize:"none",rows:"3",type:"textarea",placeholder:"",disabled:!t.canEdit},on:{input:t.fontChange},model:{value:t.formData.programContent,callback:function(e){t.$set(t.formData,"programContent",e)},expression:"formData.programContent"}})],1),e("el-form-item",{attrs:{label:"文本颜色 : ",prop:"textColor"}},[e("el-input",{attrs:{size:"small",placeholder:"",disabled:!t.canEdit},model:{value:t.formData.textColor,callback:function(e){t.$set(t.formData,"textColor",e)},expression:"formData.textColor"}},[e("template",{slot:"suffix"},[e("el-color-picker",{attrs:{size:"small",disabled:!t.canEdit},on:{change:t.fontChange},model:{value:t.formData.textColor,callback:function(e){t.$set(t.formData,"textColor",e)},expression:"formData.textColor"}})],1)],2)],1),e("el-form-item",{attrs:{label:"文本字体 : ",prop:"textCase"}},[e("el-select",{attrs:{placeholder:"",disabled:!t.canEdit},on:{change:t.fontChange},model:{value:t.formData.textCase,callback:function(e){t.$set(t.formData,"textCase",e)},expression:"formData.textCase"}},t._l(t.textCaseList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",{attrs:{label:"文本字号 : ",prop:"textFont"}},[e("el-input-number",{attrs:{disabled:!t.canEdit,"controls-position":"right",min:1,max:100},on:{change:t.fontChange},model:{value:t.formData.textFont,callback:function(e){t.$set(t.formData,"textFont",e)},expression:"formData.textFont"}})],1),e("el-form-item",{attrs:{label:"文本行高 : ",prop:"textHeight"}},[e("el-input-number",{attrs:{disabled:!t.canEdit,"controls-position":"right",min:1,max:100},on:{change:t.fontChange},model:{value:t.formData.textHeight,callback:function(e){t.$set(t.formData,"textHeight",e)},expression:"formData.textHeight"}})],1),e("el-form-item",{attrs:{label:"背景颜色 : ",prop:"background"}},[e("el-input",{attrs:{placeholder:"",disabled:!t.canEdit},model:{value:t.formData.background,callback:function(e){t.$set(t.formData,"background",e)},expression:"formData.background"}},[e("template",{slot:"suffix"},[e("el-color-picker",{attrs:{disabled:!t.canEdit},on:{change:t.fontChange},model:{value:t.formData.background,callback:function(e){t.$set(t.formData,"background",e)},expression:"formData.background"}})],1)],2)],1),e("el-form-item",{attrs:{label:"是否绘制网格 : ",prop:"haveGrid"}},[e("el-radio-group",{on:{change:t.fontChange},model:{value:t.formData.haveGrid,callback:function(e){t.$set(t.formData,"haveGrid",e)},expression:"formData.haveGrid"}},t._l(t.haveGridOption,(function(a,o){return e("el-radio",{key:o,attrs:{label:a.value}},[t._v(t._s(a.label)+" ")])})),1)],1)],1)],1)]),e("el-col",{attrs:{span:10}},[e("div",{staticClass:"textBox-right"},[e("span",{staticClass:"textBox-right-font"},[t._v(" 预览 : ")]),e("div",{staticClass:"textBox-right-board"},[e("div",{staticClass:"textBox-right-board-group"},[e("div",{staticClass:"borderContainer",on:{click:t.showDialog}},[e("canvas",{staticStyle:{border:"grey 1px solid"},attrs:{width:"273x",height:"153px",id:"myCanvas"}})]),e("span",[t._v(" (1920 * 1080) ")])])])])])],1),e("el-dialog",{attrs:{title:t.dialogTitle,width:"580px","append-to-body":"",visible:t.dialogVisible,"before-close":t.hideDialog},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("div",[e("el-image",{staticStyle:{width:"546px",height:"306px"},attrs:{src:t.imgUrl}})],1)]),e("el-button",{attrs:{type:"primary"},on:{click:t.exportFormData}},[t._v("buttonCont")])],1)},C=[],y={name:"ytRealCanvas",components:{},props:{dialogTitle:{type:String,default:"预览图片"},canEdit:{type:Boolean,default:!0}},data(){return{formData:{programContent:"yt-ui组件库",textFont:"24",textCase:"微软雅黑",textColor:"#FFF",background:"#000",textHeight:"24",haveGrid:!0},formDataRules:{},textCaseList:[{label:"微软雅黑",value:"微软雅黑"},{label:"华文行楷",value:"华文行楷"},{label:"宋体",value:"宋体"},{label:"隶书",value:"隶书"}],haveGridOption:[{label:"是",value:!0},{label:"否",value:!1}],dialogVisible:!1,imgUrl:null}},methods:{initMyCanvas(){this.drawCanvas({element:"#myCanvas",lineColor:"rgba(238,238,238,0.6)",lineStepX:10,lineStepY:10,bgColor:this.formData.background,bgStepX:0,bgStepY:0,lineHeight:this.formData.textHeight,byteLength:20,text:this.formData.programContent,startLeft:20,startTop:40})},drawCanvas(t){console.log(t,"params");let{element:e,lineHeight:a,byteLength:o,text:n,startLeft:r,startTop:l,lineColor:i,lineStepX:s,lineStepY:d,bgColor:c,bgStepX:f,bgStepY:m}=t;const p=document.querySelector(e),u=p.getContext("2d");function h(t){let e=t?t.length:0,a=0;for(let o=0;o<e;o++)t.charCodeAt(o)>128?a+=2:a+=1;return a}function g(t,e){let a=t?t.length:0,o=a,n=0;for(let r=0;r<a;r++)if(t.charCodeAt(r)>128){if(!(n+2<e)){o=r;break}n+=2}else{if(!(n+1<e)){o=r;break}n+=1}return o}u.save(),u.lineWidth=.5,u.strokeStyle=i,u.fillStyle=c,u.fillRect(f,m,p.width,p.height),u.setLineDash([]),u.beginPath(),this.formData.haveGrid&&this.makeGrid({canvas:p,lineStepX:s,lineStepY:d,context:u}),u.fillStyle=this.formData.textColor,u.font=`${this.formData.textFont}px ${this.formData.textCase}`;for(let b=1;h(n)>0;b++){let t=g(n,o);u.fillText(n.substr(0,t).replace(/^\s+|\s+$/,""),r,(b-1)*a+l),n=n.substr(t)}u.restore(),u.closePath()},makeGrid(t){let{canvas:e,lineStepX:a,lineStepY:o,context:n}=t;for(let r=a+.5;r<e.width;r+=a)n.beginPath(),n.moveTo(r,.5),n.lineTo(r,e.height+.5),n.stroke();for(let r=o+.5;r<e.height;r+=o)n.beginPath(),n.moveTo(.5,r),n.lineTo(e.width,r),n.stroke()},fontChange(){this.drawCanvas({element:"#myCanvas",lineColor:"rgba(238,238,238,0.6)",lineStepX:10,lineStepY:10,bgColor:this.formData.background,bgStepX:0,bgStepY:0,lineHeight:this.formData.textHeight,byteLength:20,text:this.formData.programContent,startLeft:20,startTop:40})},showDialog(){let t=document.getElementById("myCanvas");this.dialogVisible=!0,this.imgUrl=t.toDataURL()},hideDialog(){this.imgUrl=null,this.dialogVisible=!1},exportFormData(){return console.log(this.formData),this.formData}},created(){},mounted(){this.initMyCanvas()}},D=y,_=s(D,x,C,!1,null,"101510c3",null),S=_.exports;S.install=t=>{t.component(S.name,S)};var k=S;const w=[f,v,k],$=function(t){w.forEach((e=>{t.component(e.name,e)}))};"undefined"!==typeof window&&window.Vue&&$(window.Vue);var T={install:$,ytDemo:v,ytComp:f,ytRealCanvas:k},E=T;return e}()}));
//# sourceMappingURL=yt-ui.umd.min.js.map